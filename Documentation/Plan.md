# План автоматизации тестирования комплексного сервиса покупки тура

Комплексный сервис, взаимодействующий с СУБД и API Банка.

## Перечень автоматизируемых сценариев:

**Тестовые данные:**
Валидные данные:
* APPROVED карта: 1111 2222 3333 4444
* DECLINED карта: 5555 6666 7777 8888
* Срок действия карты: не ранее года проведения тестирования (верхнее граничное значение не ставим, т.к. сейчас выпускают бессрочные карты)
* Владелец: имя и фамилия на латинском
* Код CVC/CVV: от 000 до 999

### **Позитивные сценарии**
**1. Оплата картой APPROVED**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В появившейся форме ввести валидные данные (номер карты - 1111 2222 3333 4444)
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные успешно отправлены и появились в БД
* Появится уведомление об одобрении операции банком

**2. Оплата картой DECLINED**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В появившейся форме ввести валидные данные (номер карты - 5555 6666 7777 8888)
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные успешно отправлены и появились в БД
* Появится уведомление об отказе в проведении операции банком

**2. Покупка в кредит**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить в кредит"
* В появившейся форме ввести валидные данные
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные успешно отправлены и появились в БД
* Появится уведомление об одобрении операции банком

### **Негативные сценарии**

**1. Пустая форма**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "Номер карты" появится сообщение "Неверный формат"
* Под полем "Месяц" появится сообщение "Неверный формат"
* Под полем "Год" появится сообщение "Неверный формат"
* Под полем "Владелец" появится сообщение "Поле обязательно для заполнения"
* Под полем "CVC/CVV" появится сообщение "Неверный формат"

**2. Поле "Номер карты"**

**2.1. Номер, содержащий буквы**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Номер карты" ввести номер с буквами (1111 2222 3333 abcd)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Буквы не ввелись в поле "Номер карты"
* Данные не отправлены
* Под полем "Номер карты" появится сообщение "Неверный формат"

**2.2. Номер, содержащий иные спецсимволы и знаки препинания (кроме цифр)**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Номер карты" ввести номер, содержащий спецсимволы и знаки препинания (1111 2222 3333 .№?*)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Спецсимволы и знаки препинания не ввелись в поле "Номер карты"
* Данные не отправлены
* Под полем "Номер карты" появится сообщение "Неверный формат"

**2.3. Неполный номер**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Номер карты" ввести 11 цифр (1111 2222 3333 444)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "Номер карты" появится сообщение "Неверный формат"

**2.4. Невалидный номер**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Номер карты" ввести невалидный номер (5555 5555 5555 5555)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные успешно отправлены и появились в БД
* Появится уведомление об отказе в проведении операции банком

**3. Поле "Месяц"**

**3.1. Месяц, содержащий буквы**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Месяц" ввести номер с буквами (1k)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Буквы не ввелись в поле "Месяц"
* Данные не отправлены
* Под полем "Месяц" появится сообщение "Неверный формат"

**3.2. Месяц, содержащий иные спецсимволы и знаки препинания (кроме цифр)**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Месяц" ввести месяц, содержащий спецсимволы и знаки препинания (%?)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Спецсимволы и знаки препинания не ввелись в поле "Месяц"
* Данные не отправлены
* Под полем "Месяц" появится сообщение "Неверный формат"

**3.3. Невалидный месяц, верхнее граничное значение**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Месяц" ввести невалидный месяц (14)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "Месяц" появится сообщение "Неверно указан срок действия карты"

**3.4. Невалидный месяц, нижнее граничное значение**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Месяц" ввести невалидный месяц (00)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "Месяц" появится сообщение "Неверно указан срок действия карты"


**4. Поле "Год"**

**4.1. Год, содержащий буквы**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Год" ввести номер с буквами (2е)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Буквы не ввелись в поле "Год"
* Данные не отправлены
* Под полем "Год" появится сообщение "Неверный формат"

**4.2. Год, содержащий иные спецсимволы и знаки препинания (кроме цифр)**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Год" ввести номер, содержащий спецсимволы и знаки препинания (^!)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Спецсимволы и знаки препинания не ввелись в поле "Год"
* Данные не отправлены
* Под полем "Год" появится сообщение "Неверный формат"


**4.3. Невалидный год, нижнее граничное значение**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Год" ввести невалидный год (текущий год - 1)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "Год" появится сообщение "Истёк срок действия карты"

**4.4. Неполный год**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Год" ввести неполный год из 1 цифры (2)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "Год" появится сообщение "Неверный формат"

**5. Поле "Владелец"**

**5.1. Имя, содержащее цифры**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Владелец" ввести имя с цифрами (123)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "Владелец" появится сообщение "Неверный формат имени владельца"

**5.2. Имя, содержащее иные спецсимволы и знаки препинания**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Владелец" ввести имя, содержащее спецсимволы и знаки препинания (%!)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "Владелец" появится сообщение "Неверный формат имени владельца"

**5.3. Имя на русском языке**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "Владелец" ввести имя на кириллице (Иван Иванов)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "Владелец" появится сообщение "Неверный формат имени владельца"

**6. Поле "CVC/CVV"**

**6.1. CVC/CVV, содержащее буквы**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "CVC/CVV" ввести CVC/CVV с буквами (12g)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Буквы не ввелись в поле "CVC/CVV"
* Данные не отправлены
* Под полем "CVC/CVV" появится сообщение "Неверный формат"

**6.2. CVC/CVV, содержащее иные спецсимволы и знаки препинания (кроме цифр)**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "CVC/CVV" ввести CVC/CVV, содержащий иные спецсимволы и знаки препинания (;&)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Спецсимволы и знаки препинания не ввелись в поле "CVC/CVV"
* Данные не отправлены
* Под полем "CVC/CVV" появится сообщение "Неверный формат"

**6.3. Неполный номер CVC/CVV**

*Шаги*:

* Открыть [страницу покупки тура](https://localhost:8080/)
* Нажать на кнопку "Купить"
* В поле "CVC/CVV" ввести CVC/CVV из 2 цифр (12)
* Остальные поля заполнить валидными данными
* Нажать кнопку "Продолжить"

*Ожидаемый результат*

* Данные не отправлены
* Под полем "CVC/CVV" появится сообщение "Неверный формат"

## Перечень используемых инструментов с обоснованием выбора
| **Инструмент**| **Обоснование выбора** |
| :---: | :---: |
|Java 11 | Язык программирования для написания автотестов |
|IntelliJ IDEA| Интегрированная среда разработки, подходит для Java|
|Gradle| Система автоматической сборки|
|Git| Распределенная система управления версиями|
|GitHub| Сервис для хранения кода|
|Allure| Фреймворк, предназначенный для создания визуально наглядной картины выполнения тестов|
|JUnit5| Фреймворк, предназначенный для тестирования ПО|
|Selenide| Библиотека, предназначенная для UI тестирования веб-приложений|
|Faker| Библиотека для генерации фейковых данных|
|Lombok| Библиотека для автоматической генерации кода|
|Docker+Docker-compose| Система контейнеризации, необходимо для подключения к базе данных|
|SQL| Язык программирования для работы с базой данных|
|MySQL| СУБД, к которой подключено приложение|
|Apache Commons DbUtils| Набор классов, которые позволят проще работать с JDBC|
|DBeaver| Десктопное приложение для работы с базой данных|
|HTML| Язык разметки документов для просмотра веб-страниц в браузере, необходим для понимания структуры веб-страницы и написания локаторов для элементов страницы|

## Перечень и описание возможных рисков при автоматизации
1. Отсутствие документации. Могут возникнуть трудности в процессе анализа требований. Потребуется больше времени для понимания правильного функционала веб-сервиса.
2. При изменении элементов на сайте, придется переписывать локаторы в автотестах, а то и вовсе полностью переписывать некоторые тесты.
3. Выбор сложных инструментов для тестирования приведет к увеличению времени на изучение этих инструментов для дальнейшего использования.
4. Симулятор банковских сервисов не гарантирует, что приложение будет работать с реальными банковскими сервисами.

## Интервальная оценка с учётом рисков (в часах)
Необходимое время для автоматизации тестирования веб-сервиса покупки тура - 80 часов (или 10 рабочих дней). В это время входит анализ требований, подключение всех необходимых инструментов, подключение к БД, запуск приложения, написание автотестов, необходимая правка, написание сопутствующей документации (тест-план, баг-репорты (issue), отчет о тестировании).

## План сдачи работ
* Подготовка к проведению тестирования: запуск SUT, подключение к БД, подключение всех необходимых инструментов, написание плана тестирования - 17.03.2021
* Написание и прогон авто-тестов (включая все необходимые правки) - 22.03.2021
* Заведение баг-репортов и составление issue - 25.03.2021
* Оформление отчета по итогам тестирования - 28.03.2021
* Оформление отчета по итогам автоматизации - 31.03.2021